<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> - Premium Online Chess</title>
    <link rel="stylesheet" href="/css/style.css">
    <meta name="description" content="Play chess online with friends in real-time. Premium chess experience with 3D effects and smooth animations.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="background-container">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
        <div class="chess-pattern"></div>
    </div>

    <!-- Main Container -->
    <div class="game-container">
        <!-- Left Sidebar -->
        <aside class="left-sidebar">
            <!-- Black Player Card -->
            <div class="player-card black-player" id="blackPlayerCard">
                <div class="player-avatar">
                    <div class="avatar-ring"></div>
                    <div class="avatar-icon">‚ôî</div>
                </div>
                <div class="player-info">
                    <h3 class="player-name">Black Player</h3>
                    <div class="player-rating">
                        <span class="rating-badge">1500</span>
                        <span class="rating-label">Rating</span>
                    </div>
                </div>
                <div class="player-timer-container">
                    <div class="timer-display" id="blackTimer">
                        <span class="timer-minutes">10</span>
                        <span class="timer-separator">:</span>
                        <span class="timer-seconds">00</span>
                    </div>
                    <div class="timer-bar">
                        <div class="timer-fill" id="blackTimerBar"></div>
                    </div>
                </div>
                <div class="captured-pieces-container">
                    <div class="captured-label">Captured</div>
                    <div class="captured-pieces" id="capturedBlack"></div>
                    <div class="material-advantage" id="blackAdvantage"></div>
                </div>
            </div>

            <!-- Game Stats Card -->
            <div class="stats-card glass-effect">
                <h3 class="card-title">
                    <span class="icon">üìä</span>
                    Game Stats
                </h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="moveCount">0</span>
                        <span class="stat-label">Moves</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="gameTime">0:00</span>
                        <span class="stat-label">Duration</span>
                    </div>
                </div>
                <div class="players-status" id="playersStatus">
                    <div class="status-item waiting" data-player="white">
                        <span class="status-dot"></span>
                        <span>White Player</span>
                    </div>
                    <div class="status-item waiting" data-player="black">
                        <span class="status-dot"></span>
                        <span>Black Player</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Board Section -->
        <main class="board-section">
            <!-- Header -->
            <header class="game-header glass-effect">
                <div class="header-left">
                    <div class="logo">
                        <span class="logo-icon">‚ôî</span>
                        <span class="logo-text">ChessElite</span>
                    </div>
                    <div class="role-badge" id="roleInfo">
                        <span class="badge-dot"></span>
                        <span class="badge-text">Connecting...</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="connection-indicator" id="connectionStatus">
                        <span class="pulse-dot"></span>
                        <span class="connection-text">Connected</span>
                    </div>
                </div>
            </header>

            <!-- Board Container -->
            <div class="board-container">
                <div class="board-wrapper glass-effect">
                    <!-- Turn Indicator -->
                    <div class="turn-indicator-wrapper">
                        <div class="turn-indicator" id="turnIndicator">
                            <span class="turn-icon">‚ö™</span>
                            <span class="turn-text">White to move</span>
                        </div>
                        <div class="status-badges">
                            <div class="status-badge" id="statusInfo"></div>
                        </div>
                    </div>

                    <!-- Chess Board -->
                    <div class="board-frame">
                        <div class="board-shadow"></div>
                        <div class="chessboard" id="chessboard"></div>
                        <div class="board-glow"></div>
                    </div>

                    <!-- Move Indicators -->
                    <div class="last-move-indicator" id="lastMoveIndicator"></div>
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button class="control-btn secondary" id="flipBoardBtn" title="Flip Board">
                        <span class="btn-icon">üîÑ</span>
                        <span class="btn-text">Flip</span>
                    </button>
                    <button class="control-btn secondary" id="drawBtn" title="Offer Draw">
                        <span class="btn-icon">ü§ù</span>
                        <span class="btn-text">Draw</span>
                    </button>
                    <button class="control-btn danger" id="resignBtn" title="Resign Game">
                        <span class="btn-icon">üè≥Ô∏è</span>
                        <span class="btn-text">Resign</span>
                    </button>
                    <button class="control-btn primary" id="copyLinkBtn" title="Share Game Link">
                        <span class="btn-icon">üîó</span>
                        <span class="btn-text">Share</span>
                    </button>
                    <button class="control-btn success" id="rematchBtn" style="display: none;" title="Request Rematch">
                        <span class="btn-icon">‚ôªÔ∏è</span>
                        <span class="btn-text">Rematch</span>
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <!-- White Player Card -->
            <div class="player-card white-player" id="whitePlayerCard">
                <div class="player-avatar">
                    <div class="avatar-ring"></div>
                    <div class="avatar-icon">‚ôö</div>
                </div>
                <div class="player-info">
                    <h3 class="player-name">White Player</h3>
                    <div class="player-rating">
                        <span class="rating-badge">1500</span>
                        <span class="rating-label">Rating</span>
                    </div>
                </div>
                <div class="player-timer-container">
                    <div class="timer-display" id="whiteTimer">
                        <span class="timer-minutes">10</span>
                        <span class="timer-separator">:</span>
                        <span class="timer-seconds">00</span>
                    </div>
                    <div class="timer-bar">
                        <div class="timer-fill" id="whiteTimerBar"></div>
                    </div>
                </div>
                <div class="captured-pieces-container">
                    <div class="captured-label">Captured</div>
                    <div class="captured-pieces" id="capturedWhite"></div>
                    <div class="material-advantage" id="whiteAdvantage"></div>
                </div>
            </div>

            <!-- Move History Card -->
            <div class="history-card glass-effect">
                <h3 class="card-title">
                    <span class="icon">üìú</span>
                    Move History
                </h3>
                <div class="move-history-container">
                    <div class="move-history" id="moveHistory">
                        <div class="empty-state">
                            <span class="empty-icon">‚ôüÔ∏è</span>
                            <p>No moves yet</p>
                        </div>
                    </div>
                </div>
                <div class="history-controls">
                    <button class="history-btn" id="firstMoveBtn" title="First Move">‚èÆÔ∏è</button>
                    <button class="history-btn" id="prevMoveBtn" title="Previous Move">‚óÄÔ∏è</button>
                    <button class="history-btn" id="nextMoveBtn" title="Next Move">‚ñ∂Ô∏è</button>
                    <button class="history-btn" id="lastMoveBtn" title="Last Move">‚è≠Ô∏è</button>
                </div>
            </div>
        </aside>
    </div>

    <!-- Game Over Modal -->
    <div class="modal-overlay" id="gameOverModal">
        <div class="modal glass-effect">
            <div class="modal-header">
                <h2 class="modal-title" id="gameOverTitle">Game Over</h2>
            </div>
            <div class="modal-body">
                <div class="result-icon" id="resultIcon">üèÜ</div>
                <p class="result-message" id="resultMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn primary" id="modalRematchBtn">
                    <span>‚ôªÔ∏è</span>
                    New Game
                </button>
                <button class="modal-btn secondary" id="modalCloseBtn">
                    <span>‚úï</span>
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js" 
            integrity="sha384-mkQ3/7FUtcGyoppY6bz/PORYoGqOl7/aSUMn2ymDOJcapfS6PHqxhRTMh1RR0Q6+" 
            crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js" 
            integrity="sha512-xRllwz2gdZciIB+AkEbeq+gVhX8VB8XsfqeFbUh+SzHlN96dEduwtTuVuc2u9EROlmW9+yhRlxjif66ORpsgVA==" 
            crossorigin="anonymous" 
            referrerpolicy="no-referrer"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    
    <script src="/js/chessgame.js"></script>
</body>
</html>
